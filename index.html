<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ISS Telemetry Proxy</title>
  <script src="https://cdn.jsdelivr.net/npm/lightstreamer-client-web/lightstreamer.min.js"></script>
</head>
<body>
  <h1>ISS Telemetry Proxy</h1>
  <div id="telemetry"></div>
  <script>
    window.onload = function() {
      var client = new Lightstreamer.LightstreamerClient("https://push.lightstreamer.com", "ISSLIVE");
      client.connect();
      var items = ["AIRLOCK000001","AIRLOCK000002"];
      var fields = ["Value", "TimeStamp"];
      var output = document.getElementById("telemetry");
      var sub = new Lightstreamer.Subscription("MERGE", items, fields);
      sub.addListener({
        onItemUpdate: function(update) {
          var result = {
            name: update.getItemName(),
            value: update.getValue("Value"),
            time: update.getValue("TimeStamp")
          };
          var div = document.createElement("div");
          div.textContent = JSON.stringify(result);
          output.insertBefore(div, output.firstChild);
        }
      });
      client.subscribe(sub);
    }
  </script>
</body>
</html>
